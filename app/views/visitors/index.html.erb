<div class="ingredient-browser">
 
  <div class="header container">
    <div class="row">
      <div class="col-sm-5">
        <h1>The Ingredient Browser</h1>
      </div>
      <div class="col-sm-7">
        <div class="skip-link"><a href="#ingredient-search">Skip to Ingredient Search</a></div>
        <p aria-hidden="true">This visual graphic gives an overall glance of the most common  pharamceutical ingredients used in medications, cosmetics, and consumable products and their frequency of occurance.</p>
        <p aria-hidden="true">Hover and select a bubble for a list of products that contain the element.</p>
        <p> Update the input field below to search for specific pharmaceutical ingredients.</p>
        <form class="form-inline">
          <div class="form-group">
            <label for="substance">Search for </label>
            <input id="substance" role="search" placeholder="substance">
            <input type="hidden" id="substance-id">
            
            <!-- We need a way for this link to show after text has been entered so users can skip over the infographic and see the results table right away... for ease-of-use and accessibility -->
            
            <a href="#ingredient-search">See results</a>
            
            
          </div>
        </form>
        <div class="bubblecharttooltip"></div>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="row">
        <div id="bubblechartcontainer"></div>
    </div>
  </div>

  <div class="search container" role="main">
    <div class="row">
      <div class="col-xs-12">

        
        <div class="details" style="display: none">
          <p id="substance-details">
            There are <span id="substance-count"></span> labels whose ingredients contain <span id="substance-label"></span>.
          </p>
          <p id="collection-details">
            This represents <span id="substance-percentage"></span>% of the <span id="collection-total"></span> labels in the system.
          </p>
        </div>
        <div id="items"></div>
      </div>
    </div>
  </div>
</div>

<script id="label-template" type="x-handlebars-template">
  <nav>
    <ul class="pagination">
    {{#paginate meta.results type="previous"}}
      <li {{#if disabled}} class="disabled"{{/if}}>
        <a href="#" data-page="{{n}}" data-substance={{substance}}
          class="paginationLink"
            aria-label="Previous">
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
    {{/paginate}}
    {{#paginate meta.results type="numbers"}}
      <li {{#if active}}class="active"{{/if}}>
        <a href="#" data-page="{{n}}" data-substance="{{substance}}"
          class="paginationLink">{{n}}</a>
      </li>
    {{/paginate}}
    {{#paginate meta.results type="next"}}
      <li {{#if disabled}} class="disabled"{{/if}}>
        <a href="#" data-page="{{n}}" data-substance="{{substance}}"
          class="paginationLink" aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
    {{/paginate}}
    </ul>
  </nav>

  <div id="item-labels">
  {{#grouped_each 3 results}}
    <div class="row">
    {{#each this}}
      <div class="col-lg-4  col-md-4 col-sm-4 item">
        <h2 class="brand-name">{{openfda.brand_name}}</h2>
        <div class="product-type">
          <h3>Product Type</h3>
          <span>{{openfda.product_type}}</span>
        </div>
        <div class="active-ingredients">
          <h3 class="active-ingredients-header">Active Ingredients</h3>
          {{#each openfda.substance_name}}
            <div class="active-ingredient">
              <a href="#" class="substance" data-substance="{{this}}">
                {{this}}
              </a>
            </div>
          {{/each}}
        </div>
      </div>
    {{/each}}
    </div>
  {{/grouped_each}}
  </div>

</script>
